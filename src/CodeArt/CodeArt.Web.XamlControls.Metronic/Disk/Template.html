<ControlTemplate xmlns="http://schemas.codeart.cn/web/xaml" 
                 xmlns:m="http://schemas.codeart.cn/web/xaml/metronic"
                 xmlns:ms="http://schemas.codeart.cn/web/xaml/metronic/sealed">
<!--    <ControlTemplate.Directory>
        <AssetDirectory AssemblyName="CodeArt.Web.XamlControls.Metronic" Path="Disk">
            <AssetPackage Path="images"></AssetPackage>
        </AssetDirectory>
    </ControlTemplate.Directory>-->
<div id="{TemplateBinding Id}" class="{TemplateBinding Class}" 
    data-proxy="{TemplateBinding ProxyCode}"
    style="{TemplateBinding Style}"
    name="{TemplateBinding Name}" 
    data-rootId="{TemplateBinding RootId}" 
    AttachedAttributes="{TemplateBinding Attributes}">
    <div class="row">
        <div class="col-md-12 col-trim">
            <div class="disk-uploader">
                <div class="text-left">
                    <a href="javascript:;" class="btn btn-circle blue-madison close-uploader"><i class="fa fa-backward"></i> 返回文件列表 </a>
                </div>
                <div class="tabbable upload-tabbable">
                    <div class="tab-content">
                        <div class="tab-pane active">
                            <form data-name="uploadForm" method="post" enctype="multipart/form-data" class="dropzone">
                                <input type="hidden" name="folderId" />
                                <div class="fallback">
                                    Upload:<br />
                                    <input name="file" type="file" />
                                </div>
                            </form>
                        </div>
                        <div class="upload-help">拖拽文件或点击以上区域选择文件。当上传完毕后点击“返回文件列表”按钮。</div>
                    </div>
                </div>
            </div>
            <div class="portlet light">
                <div class="portlet-title">
                    <div class="actions">
                        <a href="javascript:;" data-name="btn-upload" class="btn btn-circle btn-default"><i class="fa fa-upload"></i> 上传文件 </a>
                        <a href="javascript:;" class="btn btn-circle btn-default new-folder"><i class="fa fa-folder-open"></i> 新建文件夹 </a>
                    </div>
                    <div class="inputs">
                        <div class="portlet-input input-inline input-medium">
                            <div class="input-group">
                                <input type="text" class="form-control input-circle-left disk-filter-input">
                                <span class="input-group-btn">
                                    <button class="btn btn-circle-right btn-default disk-filter-btn" type="submit">查找</button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="page-bar">
                        <ul class="page-breadcrumb"></ul>
                        <div class="page-toolbar">
                            <div class="btn-group pull-right">
                                <button type="button" class="btn btn-fit-height grey-salt disk-refresh">
                                    刷新 <i class="fa fa-refresh"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <ul class="grid list-view0" data-name="main-item-container" data-proxy="{give:new $$.databind()}"><li data-name="disk-back" class="back" style="display:none;">
                            <figure data-name=".." class="back-directory disk-item-command">
                                <a class="folder-link" href="javascript:;">
                                    <div class="img-precontainer">
                                        <div class="img-container directory">
                                            <span></span>
                                            <img class="directory-img" src="{m:DiskAssetsPathBinding /icon/folder_back.png}" />
                                        </div>
                                    </div>
                                    <div class="img-precontainer-mini directory">
                                        <div class="img-container-mini">
                                            <span></span>
                                            <img class="directory-img" src="{m:DiskAssetsPathBinding /icon/folder_back.png}" />
                                        </div>
                                    </div>
                                    <div class="box no-effect"><h4 class="ellipsis">返回上级目录</h4></div>
                                </a>
                            </figure>
                        </li><li class="dir" data-proxy="{loops:'dirs',binds:{'data-name':'name'},display:''}">
                            <figure class="directory" data-type="dir" data-proxy="{binds:{'data-name':'name'}}">
                                <a href="javascript:;" class="folder-link" data-proxy="{binds:{'data-id':'id'},onbind:$$metronic.disk.onbindFolder}">
                                    <div class="img-precontainer">
                                        <div class="img-container directory">
                                            <span></span>
                                            <img class="directory-img" src="{m:DiskAssetsPathBinding /icon/folder.png}" />
                                        </div>
                                    </div>
                                    <div class="img-precontainer-mini directory">
                                        <div class="img-container-mini">
                                            <span></span>
                                            <img class="directory-img" src="{m:DiskAssetsPathBinding /icon/folder.png}" />
                                        </div>
                                    </div>
                                </a>
                                <div class="box">
                                    <h4 class="ellipsis"><a href="javascript:;" class="folder-link" data-proxy="{binds:{'data-id':'id','data-file':'name','text':'name'},onbind:$$metronic.disk.onbindFolder}"></a></h4>
                                </div>
                                <input type="hidden" class="name" data-proxy="{binds:{'value':'name'}}" />
                                <input type="hidden" class="extension" value="dir" />
                                <div class='file-extension'>dir</div>
                                <figcaption class="disk-item-command">
                                    <a href="javascript:;" class="tip edit-button rename-file-paths rename-folder" title="修改名称" data-proxy="{binds:{'data-id':'id'}}">
                                        <i class="fa fa-pencil"></i>
                                    </a>
                                    <a href="javascript:;" class="tip erase-button delete-folder" title="移除" data-confirm="您确定删除本目录吗？" data-proxy="{binds:{'data-id':'id'}}">
                                        <i class="fa fa-trash-o"></i>
                                    </a>
                                </figcaption>
                            </figure>
                        </li><li data-name="disk-prev" class="back" style="display:none;">
                            <figure data-name=".." class="back-directory disk-item-command">
                                <a class="folder-link" href="javascript:;">
                                    <div class="img-precontainer">
                                        <div class="img-container directory">
                                            <span></span>
                                            <img class="directory-img" src="{m:DiskAssetsPathBinding /icon/disk-prev.png}" />
                                        </div>
                                    </div>
                                    <div class="img-precontainer-mini directory">
                                        <div class="img-container-mini">
                                            <span></span>
                                            <img class="directory-img" src="{m:DiskAssetsPathBinding /icon/disk-prev.png}" />
                                        </div>
                                    </div>
                                    <div class="box no-effect"><h4 class="ellipsis">上一页</h4></div>
                                </a>
                            </figure>
                        </li><li data-proxy="{loops:'files',binds:{'data-name':'name'},display:'',onbind:$$metronic.disk.onbindFile}">
                            <figure data-proxy="{binds:{'data-name':'name'},onbind:$$metronic.disk.onbindFile}">
                                <a href="javascript:;" class="link" data-proxy="{binds:{'data-file':'name','data-preview':'source','data-url':'source','data-extension':'ext','data-function':'apply'}}">
                                    <div class="img-precontainer">
                                        <div class="filetype" data-proxy="{binds:{'text':'ext'},onbind:$$metronic.disk.onbindFile}"></div>
                                        <div class="img-container">
                                            <span></span>
                                            <img class="icon lazy-loaded" data-proxy="{binds:{'data-original':'thumb'},onbind:$$metronic.disk.onbindFile}"> <!-- {:assetsPath}/icon/doc.jpg -->
                                        </div>
                                    </div>
                                    <div class="cover" data-proxy="{binds:{'@value':'ext'},onbind:$$metronic.disk.onbindFile}"></div>
                                </a>
                                <div class="box">
                                    <h4 class="ellipsis"><a href="javascript:;" class="link" data-proxy="{binds:{'data-file':'name','data-preview':'source','data-url':'source','data-extension':'ext','data-function':'apply',text:'name'}}"></a></h4>
                                </div>
                                <input type="hidden" class="extension" data-proxy="{binds:{'value':'ext'}}" />
                                <input type="hidden" class="name" data-proxy="{binds:{'value':'name'}}" />
                                <div class="file-size" data-proxy="{binds:{'text':'size'}}"></div>
                                <figcaption class="disk-item-command">
                                    <div class="download-form">
                                        <a title="下载文件" class="tip" target="_blank" data-proxy="{binds:{'href':'source'}}"><i class="fa fa-download"></i></a>
                                        <a class="tip preview" href="javascript:;" title="浏览" data-proxy="{binds:{'data-url':'source'},onbind:$$metronic.disk.onbindFile}"><i class="fa fa-folder-open"></i></a>
                                        <a class="preview disabled" data-proxy="{binds:{'href':'source'},onbind:$$metronic.disk.onbindFile}"><i class="fa fa-folder-open-o"></i></a>
                                        <a href="javascript:;" class="tip edit-button rename-file-paths rename-file" title="修改名称" data-proxy="{binds:{'data-id':'id'}}"><i class="fa fa-pencil"></i></a>
                                        <a href="javascript:;" class="tip erase-button delete-file" title="删除" data-confirm="您确定删除该文件吗？" data-proxy="{binds:{'data-id':'id'}}"><i class="fa fa-trash-o"></i></a>
                                    </div>
                                </figcaption>
                            </figure>
                        </li><li data-name="disk-next" class="back" style="display:none;">
                            <figure data-name=".." class="back-directory disk-item-command">
                                <a class="folder-link" href="javascript:;">
                                    <div class="img-precontainer">
                                        <div class="img-container directory">
                                            <span></span>
                                            <img class="directory-img" src="{m:DiskAssetsPathBinding /icon/disk-next.png}" />
                                        </div>
                                    </div>
                                    <div class="img-precontainer-mini directory">
                                        <div class="img-container-mini">
                                            <span></span>
                                            <img class="directory-img" src="{m:DiskAssetsPathBinding /icon/disk-next.png}" />
                                        </div>
                                    </div>
                                    <div class="box no-effect"><h4 class="ellipsis">下一页</h4></div>
                                </a>
                            </figure>
                        </li></ul>
                </div>
                <ul class="pagination"></ul>
            </div>
            <m:modal data-name="selectFolders" size="lg" title="请选择目标路径">
                <ms:datalist data-name="selectFoldersList" action="SelectFolderCommand" select="false" savestate="true" skin="open">
                    <headers>
                        <item text="目录路径" searchable="true" />
                        <item text="操作" style="width:20%;" class="text-center" />
                    </headers>
                    <columns>
                        <item text="path"></item>
                        <item class="text-center">
                            <a href="javascript:;" data-name="select" data-proxy="{binds:{'@value':'id'}}">选择</a>
                        </item>
                    </columns>
                </ms:datalist>
                <m:modal.footer>
                    <m:button color="default" data-dismiss="modal">取消关闭</m:button>
                </m:modal.footer>
            </m:modal>
        </div>
    </div>
</div>
<LinkCode ExternalKey="metronic:dropzone.js" Origin="Bottom" />
<LinkCode ExternalKey="jquery.fancybox.js" Origin="Bottom" />
<LinkCode ExternalKey="jquery.fancybox-buttons.js" Origin="Bottom" />
<LinkCode ExternalKey="jquery.fancybox-media.js" Origin="Bottom" />
<LinkCode ExternalKey="jquery.fancybox-thumbs.js" Origin="Bottom" />
<LinkCode ExternalKey="metronic:disk.js" Origin="Bottom" />

<LinkCode ExternalKey="metronic:dropzone.css" Origin="Header" />
<LinkCode ExternalKey="jquery.fancybox.css" Origin="Header" />
<LinkCode ExternalKey="jquery.fancybox-buttons.css" Origin="Header" />
<LinkCode ExternalKey="jquery.fancybox-thumbs.css" Origin="Header" />
<LinkCode ExternalKey="metronic:disk.css" Origin="Header" />
</ControlTemplate>